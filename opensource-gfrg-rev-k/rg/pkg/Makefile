ifndef JMKE_ENV_INCLUDED
  JMK_ROOT=../
  include $(JMK_ROOT)/jmk/env_root.mak
endif

# XXX Currently libc build from the rg/Makefile. This should be fixed.
JMK_JPKG_EXPORTED_DIR+=$(JMKE_PKG_LIBC)

JMK_SUBDIRS+=$(if $(CONFIG_UCLIBCXX),uclibc++)
JMK_JPKG_EXPORTED_DIR+=$(if $(CONFIG_UCLIBCXX),uclibc++)
JMK_SUBDIRS+=$(if $(CONFIG_RG_OPENSSL_COMMON),openssl)
JMK_JPKG_EXPORTED_DIR+=$(if $(CONFIG_RG_OPENSSL_COMMON),openssl)
JMK_LINK_DIRS+=$(if $(CONFIG_RG_OPENSSL_COMMON),openssl)
JMK_SUBDIRS+=$(if $(CONFIG_RG_SYSLOG_COMMON),syslog)
JMK_SUBDIRS+=$(if $(CONFIG_RG_LIBICONV),libiconv)
JMK_SUBDIRS+=util
JMK_SUBDIRS+=$(if $(CONFIG_RG_ZLIB),zlib)
JMK_JPKG_EXPORTED_DIR_SRC+=$(if $(CONFIG_RG_ZLIB),zlib)
JMK_SUBDIRS+=$(if $(CONFIG_RG_LANG),language)
JMK_SUBDIRS+=$(if $(CONFIG_RG_LICENSE),license)
JMK_SUBDIRS+=include
JMK_SUBDIRS+=$(if $(CONFIG_RG_DOC_ENABLED),doc)
JMK_LINK_DIRS+=$(if $(CONFIG_RG_DOC_ENABLED),doc)
JMK_JPKG_EXPORTED_DIR_SRC+=$(if $(CONFIG_RG_DOC_SDK),doc)
JMK_SUBDIRS+=$(if $(CONFIG_RG_LZMA),lzma)
JMK_SUBDIRS+=build
JMK_SUBDIRS+=$(if $(CONFIG_RG_TZ),tz)
JMK_SUBDIRS+=$(if $(CONFIG_RG_TDBM),tdbm)
JMK_SUBDIRS+=$(if $(CONFIG_RG_SQLITE),sqlite)
JMK_SUBDIRS+=$(if $(CONFIG_RG_MGT),mgt)
ifeq ($(CONFIG_RG_ONE_MODULE),)
  JMK_SUBDIRS+=$(if $(CONFIG_RG_KERNEL),kernel)
endif
JMK_SUBDIRS+=$(if $(CONFIG_RG_LIBMAD),av/libmad)
JMK_JPKG_EXPORTED_DIR+=$(if $(CONFIG_RG_LIBMAD),av/libmad)
JMK_LINK_DIRS+=$(if $(CONFIG_RG_LIBMAD),av/libmad)
JMK_SUBDIRS+=$(if $(CONFIG_IPTABLES),iptables)
JMK_JPKG_EXPORTED_DIR+=$(if $(CONFIG_IPTABLES),iptables)
JMK_LINK_DIRS+=$(if $(CONFIG_IPTABLES),iptables)
JMK_SUBDIRS+=$(if $(CONFIG_RG_IPROUTE2_UTILS),iproute2)
JMK_JPKG_EXPORTED_DIR+=$(if $(CONFIG_RG_IPROUTE2_UTILS),iproute2)
JMK_LINK_DIRS+=$(if $(CONFIG_RG_IPROUTE2_UTILS),iproute2)
JMK_SUBDIRS+=$(if $(CONFIG_BRIDGE_UTILS),bridge-utils)
JMK_JPKG_EXPORTED_DIR+=$(if $(CONFIG_BRIDGE_UTILS),bridge-utils)
JMK_SUBDIRS+=$(if $(CONFIG_RG_BZIP2)$(CONFIG_BOOTLDR_UBOOT),boot)
JMK_SUBDIRS+=$(if $(CONFIG_RG_BUSYBOX),busybox)
JMK_JPKG_EXPORTED_DIR+=$(if $(CONFIG_RG_BUSYBOX),busybox)
JMK_LINK_DIRS+=$(if $(CONFIG_RG_BUSYBOX),busybox)

JMK_SUBDIRS+=$(if $(CONFIG_CRAMFS_FS_COMMON),cramfs)

JMK_SUBDIRS+=$(if $(CONFIG_ROMFS_FS),genromfs)
JMK_SUBDIRS+=$(if $(CONFIG_RG_TODC)$(CONFIG_RG_SNTPS),tod)
JMK_SUBDIRS+=$(if $(CONFIG_RG_DNS),dns)
JMK_SUBDIRS+=$(if $(CONFIG_RG_NETLINK_LIBNL),libnl)
JMK_SUBDIRS+=$(if $(CONFIG_RG_HTTPS),httpd)
JMK_SUBDIRS+=$(if $(CONFIG_LOCAL_WBM_LIB)$(CONFIG_RG_WBM)$(CONFIG_RG_SSI),web_mng)
JMK_SUBDIRS+=$(if $(CONFIG_RG_LIBIMAGE)$(CONFIG_RG_LIBJPEG),image)
JMK_SUBDIRS+=$(if $(CONFIG_RG_KOS),kos)
JMK_SUBDIRS+=$(if $(CONFIG_RG_MSS),mss)
JMK_SUBDIRS+=$(if $(CONFIG_RG_ELVIS),elvis)
JMK_SUBDIRS+=$(if $(CONFIG_RG_CABLEHOME_COMMON),cablehome)
JMK_SUBDIRS+=$(if $(CONFIG_RG_KERBEROS),heimdal)
JMK_SUBDIRS+=$(if $(CONFIG_RG_UCD_SNMP),ucd-snmp)
JMK_JPKG_EXPORTED_DIR+=$(if $(CONFIG_RG_UCD_SNMP),ucd-snmp)
JMK_SUBDIRS+=$(if $(CONFIG_RG_SNMP)$(CONFIG_RG_SNMP_CLIENT),snmp)
JMK_SUBDIRS+=$(if $(CONFIG_RG_NET_SNMP),net-snmp)
JMK_JPKG_EXPORTED_DIR+=$(if $(CONFIG_RG_NET_SNMP),net-snmp)
JMK_SUBDIRS+=$(if $(CONFIG_RG_NETKIT),netkit)
JMK_JPKG_EXPORTED_DIR+=$(if $(CONFIG_RG_NETKIT),netkit)
JMK_LINK_DIRS+=$(if $(CONFIG_RG_NETKIT),netkit)
JMK_SUBDIRS+=$(if $(CONFIG_RG_NETTOOLS_ARP),net-tools)
JMK_JPKG_EXPORTED_DIR_SRC+=$(if $(CONFIG_RG_NETTOOLS_ARP),net-tools)
JMK_LINK_DIRS+=$(if $(CONFIG_RG_NETTOOLS_ARP),net-tools)
JMK_SUBDIRS+=$(if $(CONFIG_RG_PERM_STORAGE),perm_storage)
JMK_SUBDIRS+=$(if $(CONFIG_FLASH),flash)
JMK_SUBDIRS+=$(if $(CONFIG_RG_LIBPCAP),libpcap)
JMK_JPKG_EXPORTED_DIR+=$(if $(CONFIG_RG_LIBPCAP),libpcap)
JMK_LINK_DIRS+=$(if $(CONFIG_RG_LIBPCAP),libpcap)
JMK_SUBDIRS+=$(if $(CONFIG_RG_TERMCAP),termcap)
JMK_SUBDIRS+=$(if $(CONFIG_RG_TCPDUMP),tcpdump)
JMK_JPKG_EXPORTED_DIR+=$(if $(CONFIG_RG_TCPDUMP),tcpdump)
JMK_LINK_DIRS+=$(if $(CONFIG_RG_TCPDUMP),tcpdump)
JMK_SUBDIRS+=$(if $(CONFIG_RG_RMT_UPDATE),rmt-update)
JMK_SUBDIRS+=$(if $(CONFIG_RG_WGET),wget)
JMK_SUBDIRS+=$(if $(CONFIG_RG_BLUETOOTH),bluetooth)
JMK_SUBDIRS+=$(if $(CONFIG_RG_LIBTOOL),libtool)
JMK_JPKG_EXPORTED_DIR_SRC+=$(if $(CONFIG_RG_LIBTOOL),libtool)
JMK_LINK_DIRS+=$(if $(CONFIG_RG_LIBTOOL),libtool)
JMK_SUBDIRS+=$(if $(CONFIG_RG_ZZIPLIB),zziplib)
JMK_JPKG_EXPORTED_DIR_SRC+=$(if $(CONFIG_RG_ZZIPLIB),zziplib)
JMK_LINK_DIRS+=$(if $(CONFIG_RG_ZZIPLIB),zziplib)
JMK_SUBDIRS+=$(if $(CONFIG_RG_CLASSPATH),classpath)
JMK_JPKG_EXPORTED_DIR_SRC+=$(if $(CONFIG_RG_CLASSPATH),classpath)
JMK_LINK_DIRS+=$(if $(CONFIG_RG_CLASSPATH),classpath)
JMK_SUBDIRS+=$(if $(CONFIG_RG_KAFFE),kaffe)
JMK_JPKG_EXPORTED_DIR_SRC+=$(if $(CONFIG_RG_KAFFE),kaffe)
JMK_LINK_DIRS+=$(if $(CONFIG_RG_KAFFE),kaffe)
JMK_SUBDIRS+=$(if $(CONFIG_RG_VOIP)$(CONFIG_RG_TR_104)$(CONFIG_HW_DSP),voip)
JMK_SUBDIRS+=$(if $(CONFIG_RG_VOIP_DEMO),voip/dsp/test)
JMK_SUBDIRS+=$(if $(CONFIG_IXJ),voip/ixj)
JMK_SUBDIRS+=$(if $(CONFIG_GMP),gmp)
JMK_JPKG_EXPORTED_DIR+=$(if $(CONFIG_GMP),gmp)
JMK_LINK_DIRS+=$(if $(CONFIG_GMP),gmp)
JMK_SUBDIRS+=$(if $(CONFIG_IPSEC),ipsec)
JMK_SUBDIRS+=$(if $(CONFIG_FREESWAN_COMMON),freeswan)
JMK_JPKG_EXPORTED_DIR_SRC+=$(if $(CONFIG_FREESWAN_COMMON),freeswan)
JMK_LINK_DIRS+=$(if $(CONFIG_FREESWAN_COMMON),freeswan)
JMK_SUBDIRS+=$(if $(CONFIG_RG_X509),x509)
JMK_SUBDIRS+=$(if $(CONFIG_ATM),atm)
JMK_JPKG_EXPORTED_DIR_SRC+=$(if $(CONFIG_ATM),atm)
JMK_LINK_DIRS+=$(if $(CONFIG_ATM),atm)
JMK_SUBDIRS+=$(if $(CONFIG_RG_PPP_COMMON),ppp)
JMK_SUBDIRS+=$(if $(CONFIG_RG_PPPOE_RELAY),pppoe-server)
JMK_SUBDIRS+=$(if $(CONFIG_PCMCIA),pcmcia)
JMK_SUBDIRS+=$(if $(CONFIG_RG_GDBSERVER),gdb/gdb/gdbserver)
JMK_JPKG_EXPORTED_DIR+=$(if $(CONFIG_RG_GDBSERVER),gdb)
JMK_LINK_DIRS+=$(if $(CONFIG_RG_GDBSERVER),gdb/gdb/gdbserver)
JMK_SUBDIRS+=$(if $(CONFIG_RG_RIP),rip)
JMK_SUBDIRS+=$(if $(CONFIG_RG_IGMP_PROXY)$(CONFIG_RG_IGMP_SNOOPING),igmp)
JMK_SUBDIRS+=$(if $(CONFIG_RG_MCAST_RELAY),igmp)
JMK_SUBDIRS+=$(if $(CONFIG_RG_XML),expat)
JMK_SUBDIRS+=$(if $(CONFIG_RG_XML),xml)
JMK_SUBDIRS+=$(if $(CONFIG_RG_CLI)$(CONFIG_RG_CMD),cli)
JMK_SUBDIRS+=$(if $(CONFIG_RG_MEDIA_SERVER),media_server)
JMK_SUBDIRS+=$(if $(CONFIG_RG_UPNP),upnp)
JMK_SUBDIRS+=$(if $(CONFIG_RG_RMT_MNG),rmt_mng)
JMK_SUBDIRS+=$(if $(CONFIG_RG_TELNETS),telnet)
JMK_SUBDIRS+=$(if $(CONFIG_RG_SSH),openssh)
JMK_SUBDIRS+=$(if $(CONFIG_RG_BRIDGE),bridge)
JMK_SUBDIRS+=$(if $(CONFIG_RG_STP),stp)
JMK_SUBDIRS+=$(if $(CONFIG_RG_USB_SLAVE),usb_slave)
JMK_SUBDIRS+=$(if $(CONFIG_VALGRIND),valgrind)
JMK_JPKG_EXPORTED_DIR_SRC+=$(if $(CONFIG_VALGRIND),valgrind)
JMK_LINK_DIRS+=$(if $(CONFIG_VALGRIND),valgrind)
JMK_SUBDIRS+=$(if $(CONFIG_RG_DISK_MNG),disk_mng)
JMK_SUBDIRS+=$(if $(CONFIG_RG_LPD),lpd)
JMK_SUBDIRS+=$(if $(CONFIG_RG_FILESERVER),file_server)
JMK_SUBDIRS+=$(if $(CONFIG_RG_PRINT_SERVER),print_server)
JMK_SUBDIRS+=$(if $(CONFIG_RG_ATTR),attr)
JMK_SUBDIRS+=$(if $(CONFIG_RG_ACL),acl)
JMK_SUBDIRS+=$(if $(CONFIG_RG_SAMBA),samba)
JMK_JPKG_EXPORTED_DIR_SRC+=$(if $(CONFIG_RG_SAMBA),samba)
JMK_LINK_DIRS+=$(if $(CONFIG_RG_SAMBA),samba)
JMK_SUBDIRS+=$(if $(CONFIG_RG_E2FSPROGS),e2fsprogs)
JMK_JPKG_EXPORTED_DIR+=$(if $(CONFIG_RG_E2FSPROGS),e2fsprogs)
JMK_LINK_DIRS+=$(if $(CONFIG_RG_E2FSPROGS),e2fsprogs)
JMK_SUBDIRS+=$(if $(CONFIG_RG_DOSFSTOOLS),dosfstools)
JMK_JPKG_EXPORTED_DIR_SRC+=$(if $(CONFIG_RG_DOSFSTOOLS),dosfstools)
JMK_LINK_DIRS+=$(if $(CONFIG_RG_DOSFSTOOLS),dosfstools)
JMK_SUBDIRS+=$(if $(CONFIG_RG_NTFS_3G),ntfs-3g)
JMK_JPKG_EXPORTED_DIR_SRC+=$(if $(CONFIG_RG_NTFS_3G),ntfs-3g)
JMK_LINK_DIRS+=$(if $(CONFIG_RG_NTFS_3G),ntfs-3g)
JMK_SUBDIRS+=$(if $(CONFIG_RG_NTFSPROGS),ntfsprogs)
JMK_JPKG_EXPORTED_DIR_SRC+=$(if $(CONFIG_RG_NTFSPROGS),ntfsprogs)
JMK_LINK_DIRS+=$(if $(CONFIG_RG_NTFSPROGS),ntfsprogs)
JMK_SUBDIRS+=$(if $(CONFIG_RG_UTIL_LINUX),util-linux)
JMK_LINK_DIRS+=$(if $(CONFIG_RG_UTIL_LINUX),util-linux)
JMK_JPKG_EXPORTED_DIR+=$(if $(CONFIG_RG_UTIL_LINUX),util-linux)
JMK_SUBDIRS+=$(if $(CONFIG_RG_RAID),mdadm)
JMK_SUBDIRS+=$(if $(CONFIG_RG_DDNS),ddns)
JMK_SUBDIRS+=$(if $(CONFIG_RG_MAIL_SERVER),mail)
JMK_SUBDIRS+=$(if $(CONFIG_RG_ENTFY),mail_client)
JMK_SUBDIRS+=$(if $(CONFIG_RG_8021X),802.1x)
JMK_SUBDIRS+=$(if $(CONFIG_RG_WPA)$(CONFIG_RG_LOCAL_WPA_UTILS),wpa)
JMK_SUBDIRS+=$(if $(CONFIG_RG_RADIUS_COMMON),radius)
JMK_SUBDIRS+=$(if $(CONFIG_RG_HOTPLUG),hotplug)
JMK_SUBDIRS+=$(if $(CONFIG_RG_COMGT),comgt)
JMK_SUBDIRS+=$(if $(CONFIG_RG_FLEX),flex)
JMK_SUBDIRS+=$(if $(CONFIG_RG_USAGI),usagi)
JMK_SUBDIRS+=$(if $(CONFIG_RG_RADVD),radvd)
JMK_SUBDIRS+=$(if $(CONFIG_RG_DHCPV6_COMMON),dhcpv6)
JMK_SUBDIRS+=$(if $(CONFIG_RG_IPV6),ipv6)
JMK_SUBDIRS+=$(if $(CONFIG_RG_L2TPC)$(CONFIG_RG_L2TPS),l2tp)
JMK_SUBDIRS+=$(if $(CONFIG_RG_TFTP_SERVER),tftps)
JMK_SUBDIRS+=$(if $(CONFIG_ZC_AUTO_CONFIG_NON_PNP),auto_conf)
JMK_SUBDIRS+=$(if $(CONFIG_OPENRG)$(CONFIG_RG_RGLOADER_COMMON),route)
JMK_SUBDIRS+=$(if $(CONFIG_RGTV),av rgtv)
JMK_SUBDIRS+=$(if $(CONFIG_RG_FTP_SERVER),ftp)
JMK_SUBDIRS+=$(if $(CONFIG_RG_WEB_SERVER),web_server)
JMK_SUBDIRS+=$(if $(CONFIG_RG_STAR),star)
JMK_JPKG_EXPORTED_DIR+=$(if $(CONFIG_RG_STAR),star)
JMK_LINK_DIRS+=$(if $(CONFIG_RG_STAR),star)
JMK_SUBDIRS+=$(if $(CONFIG_RG_BACKUP),backup)
JMK_SUBDIRS+=$(if $(CONFIG_RG_SAMPLES_COMMON),samples)
JMK_JPKG_EXPORTED_DIR_SRC+=$(if $(CONFIG_RG_SAMPLES_COMMON),samples)
JMK_LINK_DIRS+=$(if $(CONFIG_RG_SAMPLES_COMMON),samples)
JMK_SUBDIRS+=$(if $(CONFIG_RG_FIREWALL)$(CONFIG_RG_NAT)$(CONFIG_RG_RNAT),firewall)
JMK_SUBDIRS+=$(if $(CONFIG_RG_VENDOR),vendor)
JMK_SUBDIRS+=$(if $(CONFIG_RG_RGLOADER_COMMON),rgloader)
JMK_SUBDIRS+=$(if $(CONFIG_RG_TEST_TOOLS),test_tools)
JMK_SUBDIRS+=$(if $(CONFIG_RG_DHCP_COMMON),dhcp)
JMK_SUBDIRS+=$(if $(CONFIG_RG_XML2),libxml)
JMK_JPKG_EXPORTED_DIR+=$(if $(CONFIG_RG_XML2),libxml)
JMK_SUBDIRS+=$(if $(CONFIG_RG_XMLSEC),xmlsec)
JMK_JPKG_EXPORTED_DIR+=$(if $(CONFIG_RG_XMLSEC),xmlsec)
JMK_SUBDIRS+=$(if $(CONFIG_RG_DSLHOME),dslhome)
JMK_SUBDIRS+=$(if $(CONFIG_RG_QOS),qos)
JMK_SUBDIRS+=$(if $(CONFIG_RG_WEBCAM),webcam)
JMK_SUBDIRS+=$(if $(CONFIG_RG_PSE),fastpath)
JMK_SUBDIRS+=$(if $(CONFIG_RG_TUNNELS),tunnels)
JMK_SUBDIRS+=$(if $(CONFIG_RG_SSL_VPN),ssl_vpn)
JMK_SUBDIRS+=$(if $(CONFIG_RG_WEB_CIFS),web_cifs)
JMK_SUBDIRS+=$(if $(CONFIG_RG_JAVA),java)
JMK_SUBDIRS+=$(if $(CONFIG_RG_IPERF),iperf)
JMK_LINK_DIRS+=$(if $(CONFIG_RG_IPERF),iperf)
JMK_JPKG_EXPORTED_DIR_SRC+=$(if $(CONFIG_RG_IPERF),iperf)
JMK_SUBDIRS+=$(if $(CONFIG_RG_SYSSTAT),sysstat)
JMK_LINK_DIRS+=$(if $(CONFIG_RG_SYSSTAT),sysstat)
JMK_JPKG_EXPORTED_DIR_SRC+=$(if $(CONFIG_RG_SYSSTAT),sysstat)
JMK_SUBDIRS+=$(if $(CONFIG_RG_STRACE),strace)
JMK_LINK_DIRS+=$(if $(CONFIG_RG_STRACE),strace)
JMK_JPKG_EXPORTED_DIR_SRC+=$(if $(CONFIG_RG_STRACE),strace)
JMK_SUBDIRS+=$(if $(CONFIG_RG_MTD_UTILS),mtd-utils)
JMK_LINK_DIRS+=$(if $(CONFIG_RG_MTD_UTILS),mtd-utils)
JMK_JPKG_EXPORTED_DIR_SRC+=$(if $(CONFIG_RG_MTD_UTILS),mtd-utils)
JMK_SUBDIRS+=$(if $(CONFIG_RG_JQUERY),jquery)
JMK_JPKG_EXPORTED_DIR+=$(if $(CONFIG_RG_JQUERY),jquery)
JMK_LINK_DIRS+=$(if $(CONFIG_RG_JQUERY),jquery)
JMK_SUBDIRS+=$(if $(CONFIG_RG_WIRELESS),wireless)
JMK_SUBDIRS+=$(if $(CONFIG_RG_WIRELESS_TOOLS),wireless_tools)
JMK_LINK_DIRS+=$(if $(CONFIG_RG_WIRELESS_TOOLS),wireless_tools)
JMK_SUBDIRS+=$(if $(CONFIG_RG_ANTIVIRUS),antivirus)
JMK_SUBDIRS+=$(if $(CONFIG_RG_WSC),wsc)
JMK_SUBDIRS+=$(if $(CONFIG_RG_WPS),wps)
ifndef CONFIG_RG_GPL
JMK_SUBDIRS+=$(if $(CONFIG_RG_HOSTAPD),hostapd)
endif
JMK_SUBDIRS+=$(if $(CONFIG_RG_REDUCE_SUPPORT),reduce_support)
JMK_SUBDIRS+=$(if $(CONFIG_RG_BITTORRENT),bittorrent)
JMK_SUBDIRS+=$(if $(CONFIG_RG_DECT),dect)
JMK_SUBDIRS+=$(if $(CONFIG_RG_HOME_AUTOMATION),home-automation)
JMK_SUBDIRS+=$(if $(CONFIG_RG_WEB),web)	
JMK_SUBDIRS+=$(if $(CONFIG_RG_JNET_SERVER)$(CONFIG_RG_JNET_CLIENT)$(CONFIG_RG_VAS_PORTAL),jnet)
JMK_SUBDIRS+=$(if $(CONFIG_RG_VAS_PORTAL)$(CONFIG_RG_VAS_WEB_SERVICE),vas)
JMK_SUBDIRS+=$(if $(CONFIG_HEADEND_OSAP)$(CONFIG_RG_OSAP_AGENT),headend)
JMK_SUBDIRS+=$(if $(CONFIG_RG_DISKTYPE),disktype)
JMK_SUBDIRS+=$(if $(CONFIG_RG_DOCSIS),docsis)
JMK_SUBDIRS+=$(if $(CONFIG_RG_CSG),csg)
JMK_SUBDIRS+=$(if $(CONFIG_RG_OSGI),osgi)
JMK_SUBDIRS+=$(if $(CONFIG_RG_WEB_SERVICE),web_service)
JMK_SUBDIRS+=$(if $(CONFIG_RG_3G),3g)
JMK_SUBDIRS+=$(if $(CONFIG_RG_PLUGINS),plugins)
JMK_SUBDIRS+=$(if $(CONFIG_RG_DLM),dlm)
JMK_SUBDIRS+=$(if $(CONFIG_RG_LIBEVENT),libevent)
JMK_SUBDIRS+=$(if $(CONFIG_RG_LLDP_RX),lldp)
# main _must_ compile after all libraries and tasks.
JMK_SUBDIRS+=$(if $(CONFIG_RG_MAIN),main)

# autotest is not part of openrg, but it depends on rg_default.c
# from main therefor it _must_ compile after main.
JMK_SUBDIRS+=$(if $(CONFIG_RG_AUTOTEST),autotest)

JMK_SUBDIRS+=$(if $(wildcard $(JMKE_PWD_SRC)/jpkg),jpkg)

# tools are currently relevant for UML only
JMK_SUBDIRS+= \
  $(if $(CONFIG_RG_TOOLS)$(CONFIG_RG_JPKG_UML)$(CONFIG_RG_JPKG_SRC),tools)

ifneq ($(CONFIG_RG_ONE_MODULE),)
  JMK_SUBDIRS+=$(if $(CONFIG_RG_KERNEL),kernel)
endif

$(call JMKE_INCLUDE_RULES)
